# Chapter 4. 단위 테스트와 리팩토링

- 단위 테스트(unit test) : 다른 코드를 테스트하는 코드를 작성하는 규칙.
- 리팩토링(refactoring) : 기존 코드의 디자인을 점진적으로 향상시키는 과정을 말한다.

## 1. 단위 테스트

### 1-1. 준비, 동작, 검증

- 단위 테스트의 AAA(Arrange, Act, Assert) 패턴
- 테스트의 사전 조건을 준비(arrange)한다.
- 테스트해야 할 동작(action)을 실행한다.
- 예상되는 동작이 발생했는지를 검증(assertion)한다.

#### 사전 조건 준비하기

- 테스트할 시스템(SUT, System Under Test)을 구성한다.

#### 테스트할 동작 실행하기

- 테스트하고자 하는 메서드를 실행한다,.
- 단 하나의 메서드를 호출하거나 속성의 get 혹은 set 메서드를 호출해야 한다.

#### 예상 결과 검증하기

- 실제값(actual value)과 기댓값(expected value)의 비교를 통해 검증한다.

#### 테스트 실행하기

- 단위 테스트 실행기

### 1-2. 테스트 주도 개발

- 테스트 주도 개발(TDD, Test Driven Development)

#### 빨강, 초록, 리팩토링!

1. SUT 의 예상 동작을 대상으로 우선 실패하는 테스트 코드를 작성한다.
2. SUT에 당장 필요한 코드만을 구현하여 기존에 성공한 테스트에 영향을 미치지 않고 새로 구현한 테스트가 성공하도록 한다.
3. 만일 SUT의 디자인이나 전체적인 품질을 향상시키기 위해 리팩토링이 필요하다면 이제 시작하면 된다.

첫 번째 단계에서는 실패하는 테스트를 작성한다. 이 테스트는 테스트 실행기에 빨간색으로 표시된다.
두 번째 단계에서는 실패한 테스트를 성공하도록 하기 위해 필요한 코드를 작성한다. 이 테스트는 테스트 실행기에 초록색으로 표시된다.
세 번째 단계에서는 의도했던 기능에 문제가 생기는 것에 대한 걱정 없이 프로덕션 코드를 점진적으로 향상시켜 나갈 수 있다.





[image1](./image/AxoCover.jpg)

